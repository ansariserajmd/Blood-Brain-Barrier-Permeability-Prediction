# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1TWZalRYgZuYFS6zDwLPogxWrYNxDzxRY
"""

from flask import Flask, request, jsonify, render_template
from rdkit import Chem
from rdkit.Chem import AllChem

app = Flask(__name__)

# Define the endpoint for your model prediction
@app.route('/', methods=['GET'])
def index():
    return render_template('index.html')

@app.route('/predict', methods=['POST'])
def predict():
    data = request.json  # Get the JSON data from the request
    smiles = data.get('smiles')

    # Check if the provided SMILES is valid
    if smiles is None or not Chem.MolFromSmiles(smiles):
        return jsonify({'error': 'Invalid SMILES. Please enter a valid SMILES string.'}), 400

    # Generate fingerprint using RDKit
    mol = Chem.MolFromSmiles(smiles)
    fingerprint = AllChem.GetMorganFingerprintAsBitVect(mol, 2)  # Modify the parameters as needed

    # Perform any additional preprocessing on the fingerprint if required

    # Make predictions using your trained model
    predictions = classifier.predict([fingerprint])

    # Convert predictions to the desired format
    # ...

    # Return the predictions as JSON response
    return jsonify({'predictions': predictions})

if __name__ == '__main__':
    app.run()

